! This is a template to run TRACMASS with velocities generated in readfields.f95 so you do not need to read any fields
! 1.) Copy the entire folder template_ifs and rename it as you wish. 
! 2.) Set PROJECT = to this new name in the Makfile in the directory highest up in this unix tree
! 3.) Set "outDataDir" to where you want to store your data from the TRACMASS run
&INIT_NAMELIST_VERSION
      gridvernum =      6,
/
&INIT_GRID_DESCRIPTION
	gcmname        = 'Academic test run',				! name of GCM            
	gcmsource      = '',								! website for GCM
	gridname 	   = '',								! name of grid
	gridsource     = '',								! website for grid
	griddesc       = '',								! short description of grid
	! Describe filenames
	topoDataDir = '',  									! directory of grid data
	RunID       = '',									! name of GCM simulation
	physDataDir = '',   								! directory of physical data (u,v,T,S,MLD,etc)
	fileSuffix  = '',									! suffix of files, e.g. ".nc"
	! Logicals to control what to read etc.
	useTrmClock = .false.,								! use sophisticated clock (otherwise simple clock)
/
&INIT_CASE_DESCRIPTION
        casename = 'Academic',
        casedesc = 'Rectangular ocean',
/
&INIT_GRID_SIZE
	! Size of global grid
	imt            = 5,								! number of global i points
	jmt            = 5,								! number of global j points
	km             = 1,								! number of global k points
	nst            = 2,									! number of time levels to use (should be = 2)
	! Only read subregion of the global data
	subgrid        = 0,									! only read part of the grid if > 0
	subgridimin    = 10,								! i start point of region
	subgridimax    = 100,								! i end point of region
	subgridjmin    = 10,								! j start point of region
	subgridjmax    = 100,								! j end point of region
	subgridfile    = 'templ.asc',						! or read region indices from file
	subgridid      = 0,									! number for this region
	nperio         = 1,									! control periodic boundary conditions
    													! > 0 periodic in x
														! = 4 North fold for ORCA2, 025, 0083
														! = 6 North fold for ORCA1
/
&INIT_BASE_TIME            ! The time will be counted from this date
	basesec        = 0,									! base time and date for trmClock
	basemin        = 0,
	basehour       = 0,
	baseday        = 1,
	basemon        = 1,
	baseyear       = 1900,
	jdoffset       = 0,									! trmClock offset in juliandays
/
&INIT_GRID_TIME
     fieldsperfile  = 1,
     ngcm_step      = 1,                                     ! time between two time levels
                                                             ! if ncgcm_unit = 5, then ngcm = 3 means 3 months
     ngcm_unit      = 4,                                     ! units of ngcm 
                                                             ! 1 = seconds
                                                             ! 2 = minutes
                    					     				 ! 3 = hours
							     							 ! 4 = days
							     							 ! 5 = months
							     						     ! 6 = years
     
     iter           = 1000,                                    ! number of time steps between two GCM time levels
     intmax         = 15330,                                 ! max iterations before trajectory is 
                                                             ! stopped with infiniteError
     minveljd       = -1,                                     !
     maxveljd       = -1,                                   !
/
&INIT_START_DATE            ! The starting date of the GCM data to be read
	startsec       = 0,									! start time
	startmin       = 0,
	starthour      = 0,
	startday       = 1,									! start date
	startmon       = 1,
	startyear      = 2018,
	noleap         = .false.,							! dont use leap years? 
	startjd        = -1,								! first julianday for trmClock
	intmin         = 1,									!
/
&INIT_RUN_TIME
     ! Loop run 
	loopYears      = .true.,							! make a time loop to run 
														! e.g. 1000 years using only 100 years of data
	loopStartYear  = 2018,								! year to start loop from
	loopEndYear    = 2018,								! last year of loop
     
	intspin        = 1,									! number of time steps for seeding
	intrun         = 20,							    ! number of time steps for run (always=2)
	log_level      = 2,									! level of verbosity 
														! = 0 minimal output to stdout
														! = 1 low verbosity
														! = 2 medium verbosity
/
&INIT_WRITE_TRAJS
	twritetype     =  1,								! how to write time 
														! = 1 write float time variable
														! = 2 write julianday
														! > 2 write time step
															
	kriva          = 3,									! 0 = no writing
														! 1 = write at time intervals of gcm datasets (each ints)
														! 2 = write at each time iteration
														! 3 = write all the time
														! 4 = write only start and end positions
														! 5 = write at chosen intervals
														! 6 = write each spatial grid-crossing
	outDataDir     = '/Users/doos/data/tracmass/template_theoretical/',	! directory for output
!	outdatafile    = 'theoretical_test_1',						! fileprefix for output
	outdatafile    = 'time_stat3_1000',						! fileprefix for output
	outdircase     = .false. ,							! creates a new directory to store the data from the run      
	intminInOutFile  =  0,								! 0 = ????
														! 1 = ????
														! 2 = 
														! 3 = 
	intpsi		   = 100,								! frequency of writing the stream functions
	outdirdate     = .false. ,							! if true a directory will be created where the trajectories are stored
/
&INIT_SEEDING
	nff			   = 1,								    ! = 1 run forward trajectories
														! = -1 run backwards
	isec           = 2,									! = 1 start on zonal cell wall 
														! = 2 start on meridional cell wall
														! = 3 start on vertical wall
														! = 4 start in center of cell
	idir           = 1,									! = 1 start only when flux > 0 (eastward/northward) 
														! = -1      only when flux < 0 (westward/southward)
														! = 0 start at flux < 0 or > 0 (both directions) not working ???
	nqua           = 1,									! number of trajectories can be set by     
														! = 1 constant number of particles in all seeding cells
														!     set by partQuant (particles / gridcell)
														! = 2 Each particle reflects mass transport at seeding. 
														!     set by partQuant (m3/s or kg/s per particle)
														! = 3 Each particle reflects air/water mass/volume at seeding.
														!     set by partQuant in m3 or kg per particle
														! = 5  particles set by seedfile (Set: isec==5)
	partQuant      = 1000,									! particles/gridcell or m3s-1/particle or m3/particle
	ntracmax       = 8000,							    ! max number of trajectories (set as big as possible)
	loneparticle   = 0,									! follow only this trajectory for debugging. If = 0 then all trajectories
	seedtype       = 1,									! = 1 seed by using ist,jst,kst (below)
														! = 2 seed by using list file with start positions
														! = 3 seed by using a 2-D mask file.
							     
	! Use the parameters below when seedtype = 1
	ist1           = 3,				     			! seed in box in range i = [ist1,ist2]
	ist2           = 3,				     			! 	       	      	   j = [jst1,jst2]
	jst1           = 2,	    		     			! 			           k = [kst1,kst2]
	jst2           = 2,			     
	kst1           =  1,    
	kst2           =  1,    
	tst1           = -1,								! seed only between tst1 and tst2
	tst2           = -1,								! given as 19800105 for 1980-01-05
     
	! Use the parameters below when seedtype = 2
	seeddir        = '',								! directory for seed files
	seedfile       = '',								! name of seed file
	varseedfile    = 0,									! = 1 read seedfile , = 0 use ist1,ist2,jst1,...
	seedtime       = 0,									! seed only for specific times
	seedall        = 0,									! seed all particles or only one
	seedpos        = 1,									! 
	seedparts      = 0,									!
	seedpart_id	   = 0,									!
/
&INIT_KILLZONES                ! defines a horizontal area where trajectories are terminated
	nend 		   = 4,									! number of ways to kill a trajectory (in this case time + one region)
	ienw 		   = 0 , 0,  3,								! west indices of killzones
	iene           = 10, 2, 10,						! east indices of killzones
	jens           = 3 , 0,  0,						! south indices of killzones
	jenn           = 10,10,10, 								! north indices of killzones
	timax          = 20.0, 							    ! time limit for traj [days]
/
&INIT_TEMP_SALT              
	tmin0 		   =  -50.0,							! start only if T >= tmin0
	tmax0   	   =  400.0,							! ---- " ----   T <= tmax0   
	smin0          = -500.0,							! ---- " ----   S >= smin0
	smax0          =  400.0,							!               S <= smax0
	rmin0          = -100.0,							! 		   rho >= rmin0
	rmax0          = 1100.0,							!  	   rho <= rmax0
	tmine          =  -50.0,							! kill traj  if T <  tmine
	tmaxe          =  400.0,							! ---- " -----  T >  tmaxe
	smine          = -150.0,							!               S <  smine
	smaxe          =  500.0,
	rmine          = -100.0,
	rmaxe          = 1100.0,
/
!&INIT_TRACERS
!     n2Dtracers           = 0                           ! number of 2D tracers to read
!     names2Dtracers(1)    = ''                          ! names of 2D tracers
!     n3Dtracers           = 0                           ! number of 3D tracers to read
!     names3Dtracers(1:2)  = '',''                       ! names of 3D tracers
!/
&INIT_TRACERS
     n2Dtracers           = 1                                ! number of 2D tracers to read
     names2Dtracers(1)    = 'sossheig'                       ! names of 2D tracers
     src2Dtracers(1)      = 'read' 
     desc2Dtracers(1)     = 'ssh' 
     n3Dtracers           = 3                                ! number of 3D tracers to read
     names3Dtracers(1:3)  = 'votemper','vosaline','rho'      ! names of 3D tracers
     src3Dtracers(1:3)    = 'read',    'read', 'calculate'   ! source of 3D tracers
     desc3Dtracers(1:3)   = 'temperature','pr_salinity','sigma' 
/
&INIT_DIFFUSION
              ah = 2000.0,  							! sub-grid parametersiation horizontal diffusion
              av =    0.0,  !                           							vertical
/
&INIT_SEDIMENT              							! coefficients for adding a sedimentation velocity and resuspension
        partdiam =  0.001,  
            rhos = 2620.0,
           cwamp =   20.0,
           twave =    8.0,
         critvel =    0.1,
/
